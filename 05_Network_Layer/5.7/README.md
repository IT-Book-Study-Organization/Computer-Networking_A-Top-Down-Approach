# **5.7 네트워크 관리와 SNMP, NETCONF/YANG**

## **5.7.1 네트워크 관리 프레임워크**

네트워크 관리는 네트워크 관리자들이 네트워크의 상태를 모니터링하고, 구성 및 제어할 수 있도록 돕는 역할을 한다. 네트워크 관리의 주요 구성 요소는 다음과 같다.

### **1. 관리 서버 (Managing Server)**
- 네트워크 운영 센터(NOC)에서 실행되는 중앙 집중식 네트워크 관리 스테이션이다.
- 네트워크 관리자가 개입하여 네트워크 관리 정보를 수집, 처리, 분석 및 배포한다.
- 하나의 네트워크에는 여러 개의 관리 서버가 있을 수 있다.

### **2. 관리 대상 장치 (Managed Device)**
- 네트워크 내의 모든 장비(라우터, 스위치, 호스트 등)가 이에 해당한다.
- 각 장치는 여러 관리 가능한 구성 요소(예: 라우터의 네트워크 인터페이스)를 포함하며, 다양한 설정 매개변수를 가진다.

### **3. 데이터 (Data)**
네트워크 관리에서 다루는 데이터 유형은 다음과 같다.
- **구성 데이터 (Configuration Data)**: 네트워크 관리자가 명시적으로 설정한 정보(예: IP 주소, 인터페이스 속도).
- **운영 데이터 (Operational Data)**: 장치가 작동하면서 얻는 정보(예: OSPF 프로토콜에서 연결된 이웃 목록).
- **장치 통계 (Device Statistics)**: 장치가 운영되는 동안 갱신되는 상태 정보(예: 손실된 패킷 수, 냉각 팬 속도).

### **4. 네트워크 관리 에이전트 (Network Management Agent)**
- 관리 대상 장치에서 실행되는 소프트웨어 프로세스로, 관리 서버와 통신하며 명령을 실행한다.

### **5. 네트워크 관리 프로토콜 (Network Management Protocol)**
- 관리 서버와 관리 대상 장치 간의 데이터를 교환하는 역할을 한다.
- 직접 네트워크를 관리하는 것이 아니라, 네트워크 관리자가 네트워크를 제어할 수 있는 기능을 제공한다.

---

## **5.7.2 네트워크 관리 방법**
네트워크 운영자는 네트워크를 관리하기 위해 주로 세 가지 방법을 사용한다.

### **1. CLI (Command Line Interface)**
- 장치의 CLI를 통해 직접 명령을 입력하여 제어한다.
- Telnet 또는 SSH를 통해 원격으로 명령을 입력할 수도 있다.
- 장치 및 벤더별로 CLI 명령어가 다르므로, 대규모 네트워크 환경에서는 자동화가 어렵다.

### **2. SNMP/MIB (Simple Network Management Protocol / Management Information Base)**
- **SNMP 프로토콜**을 이용하여 관리 장치의 MIB 객체를 조회하거나 설정한다.
- 장치 모니터링에 유용하지만, 대규모 네트워크 관리 및 장치 구성에는 한계가 있다.

### **3. NETCONF/YANG**
- SNMP보다 네트워크 전체의 구성을 중앙에서 관리할 수 있도록 설계되었다.
- **NETCONF**는 장치 간에 구성 데이터를 교환하는 프로토콜이며, **YANG**은 이를 모델링하는 데이터 모델링 언어이다.

---

## **5.7.3 SNMP 및 MIB**

### **SNMP 개요**
SNMP는 네트워크 관리 서버와 관리 대상 장치 간에 네트워크 관리 정보를 교환하는 프로토콜이다. 요청-응답 방식과 비동기 트랩(trap) 메시지를 사용한다.

### **SNMP에서 정의된 PDU (Protocol Data Unit) 유형**
SNMPv3에서는 7가지 PDU 유형이 정의된다.
1. **GetRequest**: 하나 이상의 MIB 객체 값을 요청.
2. **GetNextRequest**: MIB 객체 목록을 순차적으로 검색.
3. **GetBulkRequest**: 대량 데이터를 한 번에 반환.
4. **SetRequest**: MIB 객체 값을 설정.
5. **InformRequest**: 다른 관리 서버에 정보를 전달.
6. **Response**: 요청에 대한 응답.
7. **Trap**: 장치에서 예외적인 이벤트 발생 시 관리 서버에 알림.

### **SNMP의 요청-응답 모델**
- SNMP는 UDP 기반으로 동작하며, 신뢰할 수 없는 전송을 사용한다.
- 관리 서버는 Request ID를 통해 요청을 식별하고, 응답이 없으면 재전송할 수 있다.

### **SNMP의 발전**
SNMP는 보안 문제로 인해 SNMPv1, SNMPv2를 거쳐 SNMPv3에서 보안 기능이 강화되었다. 그러나 SNMP는 주로 모니터링 용도로 사용되며, 네트워크 구성 관리에는 적합하지 않다.

---

## **5.7.4 MIB (Management Information Base)**
MIB는 관리 장치의 운영 상태 및 구성 데이터를 표현하는 데이터 구조이다.

### **MIB 객체 예시**
- 특정 라우터에서 폐기된 IP 데이터그램 수
- 특정 네트워크 인터페이스에서 수신한 패킷 수
- 네트워크 장치의 CPU 사용률

MIB 객체는 SMI(Structure of Management Information)를 사용하여 정의되며, 여러 개의 MIB 모듈로 구성된다.

---

## **5.7.5 NETCONF와 YANG**

### **NETCONF 개요**
NETCONF는 관리 서버와 관리 대상 장치 간의 구성 및 운영 데이터를 교환하는 프로토콜이다. XML 기반 원격 프로시저 호출(RPC) 방식으로 동작한다.

### **NETCONF의 주요 기능**
1. **구성 데이터 검색, 설정 및 수정**
2. **운영 데이터 및 통계 조회**
3. **장치 알림 구독**

### **NETCONF의 동작 과정**
1. **관리 서버가 보안 연결을 설정**
2. **서버와 장치가 `<hello>` 메시지를 교환하여 지원 기능을 선언**
3. **XML 기반 `<rpc>` 및 `<rpc-reply>` 메시지를 사용하여 구성 및 운영 데이터를 주고받음**
4. **장치에서 알림이 발생하면 `<notification>` 메시지를 관리 서버로 전송**
5. **세션 종료 시 `<session-close>` 메시지를 사용**

### **NETCONF의 주요 작업**
- `<get>`: 장치의 모든 구성 및 운영 데이터 조회
- `<edit-config>`: 장치 구성 데이터 수정
- `<lock>` / `<unlock>`: 네트워크 장치의 구성을 잠금 또는 해제

---

## **5.7.6 YANG (Yet Another Next Generation)**
YANG은 NETCONF에서 사용되는 네트워크 관리 데이터를 모델링하는 데이터 모델링 언어이다.

### **YANG의 주요 특징**
1. **데이터 모델링 언어**: 네트워크 장치의 구성 및 운영 데이터를 구조화하여 정의.
2. **제약 조건 정의**: 구성 데이터의 정확성을 보장하는 규칙을 포함.
3. **NETCONF와 통합 가능**: XML 기반으로 NETCONF에서 사용.

### **YANG의 구조**
- **모듈 (Module)**: YANG 모델의 기본 단위로, 개별 네트워크 기능을 정의.
- **데이터 유형**: 기본 데이터 유형을 제공하며, 이를 확장할 수 있음.
- **알림(Notification) 정의**: 장치 이벤트 발생 시 알림을 제공할 수 있도록 지원.
