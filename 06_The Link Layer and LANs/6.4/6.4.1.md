# **6.4 스위칭된 로컬 영역 네트워크(Switched Local Area Networks)**

## **6.4.1 링크 계층 주소 지정(Link-Layer Addressing)과 ARP**

### **MAC 주소(MAC Addresses)**
네트워크 장치는 링크 계층 주소를 사용하여 서로 통신합니다. 링크 계층 주소는 **LAN 주소(LAN Address), 물리 주소(Physical Address), MAC 주소(Media Access Control Address)**라고도 불립니다.  

- **MAC 주소는 네트워크 인터페이스(어댑터)에 할당됩니다.**  
  - 하나의 호스트나 라우터가 여러 개의 네트워크 인터페이스를 가지면, 각 인터페이스는 고유한 MAC 주소를 가집니다.  
- **MAC 주소는 6바이트(48비트) 길이를 가지며, 16진수 표기법을 사용합니다.**  
  - 예: `49-BD-D2-C7-56-2A`  
- **MAC 주소는 기본적으로 변경할 수 없는 고정된 값이지만, 소프트웨어를 통해 변경할 수도 있습니다.**  

#### **MAC 주소의 글로벌 유일성(Global Uniqueness)**
MAC 주소는 전 세계적으로 고유해야 합니다.  
이를 보장하기 위해 **IEEE(국제전기전자기술자협회)**가 MAC 주소를 관리합니다.  

- IEEE는 특정 회사에 MAC 주소 공간의 일부를 할당합니다.  
- **MAC 주소의 앞 24비트**는 특정 제조업체에 할당되며,  
- **나머지 24비트**는 해당 제조업체가 장치별로 지정합니다.  

### **MAC 주소 vs. IP 주소**
MAC 주소와 IP 주소는 다음과 같은 차이가 있습니다.  

| **특징** | **MAC 주소** | **IP 주소** |
|----------|-------------|-------------|
| **구조** | 평면 구조(Flat) | 계층적 구조(Hierarchical) |
| **변경 여부** | 변하지 않음 (어댑터에 고정) | 네트워크 이동 시 변경됨 |
| **사용 목적** | 네트워크 내 장치 식별 | 글로벌 네트워크 내 장치 식별 |
| **유사 개념** | 주민등록번호 | 우편 주소 |

호스트가 네트워크를 이동하면 IP 주소는 변경되지만, MAC 주소는 변하지 않습니다. 이는 **MAC 주소가 네트워크 내부 식별자**, IP 주소가 **네트워크 간 식별자**로 동작하도록 합니다.  

### **ARP (Address Resolution Protocol)**
네트워크에서 IP 주소를 MAC 주소로 변환하는 프로토콜이 **ARP(Address Resolution Protocol)**입니다.  

- **호스트가 IP 데이터그램을 전송할 때, 목적지 MAC 주소를 알아야 합니다.**  
- **ARP는 IP 주소를 입력받아 해당 MAC 주소를 반환합니다.**  

#### **ARP 요청 및 응답**
각 호스트와 라우터는 **ARP 테이블**을 유지하며, 이 테이블에는 **IP 주소와 MAC 주소의 매핑 정보**가 저장됩니다.  

1. 송신자가 목적지의 MAC 주소를 모를 경우, **ARP 요청(브로드캐스트)**을 보냅니다.  
2. 해당 IP 주소를 가진 장치가 **ARP 응답(유니캐스트)**을 보내 자신의 MAC 주소를 전달합니다.  
3. 송신자는 응답을 받은 MAC 주소를 ARP 테이블에 저장한 후, 이후 요청에서 이를 사용합니다.  

ARP 테이블의 엔트리는 **일정 시간이 지나면 만료**되며, 필요할 때 다시 ARP 요청을 통해 갱신됩니다.  

## **6.4.2 이더넷(Ethernet)**
이더넷은 가장 널리 사용되는 유선 LAN 기술입니다. 초기에는 여러 LAN 기술(FDDI, 토큰 링 등)과 경쟁했지만, 점진적으로 발전하며 시장을 장악했습니다.  

### **이더넷 프레임 구조 (Ethernet Frame Structure)**
이더넷 프레임은 데이터를 전달하는 기본 단위이며, 다음과 같은 필드들로 구성됩니다.  

| **필드** | **크기** | **설명** |
|----------|---------|---------|
| **프리앰블(Preamble)** | 8바이트 | 프레임 시작을 알리고 수신 클럭을 동기화 |
| **목적지 주소(Destination Address)** | 6바이트 | 프레임을 받을 장치의 MAC 주소 |
| **출발지 주소(Source Address)** | 6바이트 | 프레임을 보낸 장치의 MAC 주소 |
| **타입(Type)** | 2바이트 | 상위 프로토콜(IP, ARP 등) 식별 |
| **데이터(Data)** | 46~1500바이트 | 실제 데이터(IP 데이터그램 등) |
| **순환 중복 검사(CRC)** | 4바이트 | 오류 검출을 위한 체크섬 |

### **이더넷의 특징**
- **최대 전송 단위(MTU)는 1500바이트**이며, 더 큰 데이터그램은 단편화 필요.  
- **브로드캐스트 및 멀티캐스트 지원** (특정 MAC 주소 사용).  
- **CSMA/CD(Carrier Sense Multiple Access with Collision Detection) 프로토콜 사용** (충돌 감지 및 재전송).  

---

### **링크 계층 스위치의 동작 방식**
링크 계층 스위치는 **브리지(Bridge)의 발전된 형태**로, 프레임을 더 효율적으로 전달합니다.  

#### **스위치의 주요 기능**
1. **프레임 포워딩 (Frame Forwarding)**  
   - **MAC 주소 테이블을 기반으로 목적지 MAC 주소가 있는 포트로 프레임을 전송**.  
   - **출발지 MAC 주소를 학습하여 MAC 주소 테이블을 자동으로 업데이트**.  

2. **루프 방지 (Loop Prevention)**  
   - 스패닝 트리 프로토콜(Spanning Tree Protocol, STP)을 사용하여 **네트워크 루프를 방지**.  
   - 루프가 발생하면 특정 링크를 차단하여 트래픽 폭증을 방지.  

#### **스위치 vs. 허브**
| **특징** | **허브(Hub)** | **스위치(Switch)** |
|----------|--------------|--------------------|
| **동작 계층** | 물리 계층(1계층) | 데이터 링크 계층(2계층) |
| **데이터 전송 방식** | 브로드캐스트 (모든 포트로 전달) | MAC 주소 기반 포워딩 |
| **충돌 가능성** | 높음 (CSMA/CD 사용) | 없음 (충돌 도메인 분리) |
| **성능** | 낮음 (공유 대역폭) | 높음 (전이중 통신 지원) |

### **대규모 LAN 구축**
스위치를 사용하여 대규모 LAN을 구축할 때 다음과 같은 방식이 사용됩니다.

1. **계층적 네트워크 설계**
   - **엑세스 계층(Access Layer)**: 사용자 장치가 연결되는 최하위 계층.  
   - **분배 계층(Distribution Layer)**: 여러 엑세스 스위치를 연결하고 정책을 적용.  
   - **코어 계층(Core Layer)**: 네트워크의 백본 역할을 수행하는 고속 스위치.  

2. **가상 LAN(VLAN)**
   - 하나의 물리적 네트워크를 여러 개의 논리적 네트워크로 분할.  
   - **보안성 및 네트워크 효율성 증가**.  

3. **링크 어그리게이션(Link Aggregation)**
   - 여러 개의 물리적 링크를 하나의 논리적 링크처럼 사용하여 대역폭 증가.  

4. **STP(Spanning Tree Protocol) 활용**
   - 루프를 방지하고 네트워크 경로를 최적화.  
