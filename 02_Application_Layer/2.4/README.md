# 2.4 DNS - 인터넷 디렉토리 서비스
사람들이 여러 가지 방식으로 식별될 수 있는 것처럼, 인터넷 호스트도 가능. 호스트를 식별하는 한 가지 방법은 호스트 이름임 (http://www.google.com/)

호스트 이름은 가변 길이의 영숫자로 구성되기에 라우터가 처리하기 어려울 수 있음. 그렇기에 호스트는 IP주소라고 불림

---

### 2.4.1 DNS에서 제공하는 서비스
호스트를 식별하는 두 가지 방법: 호스트이름과 IP주소

**hostname을 IP주소로 변환하는 디렉토리 서비스가 필요함. => 인터넷 도메인 네임 시스템(DNS)의 주요 작업**

☆ DNS의 두 가지 기능 ☆
1) 계층 구조로 된 분산 데이터베이스
2) 애플리케이션 계층 프로토콜

DNS 작동 과정 (www.yunjingood.edu/index.html요청 시)
 - 사용자의 컴퓨터에서 DNS 클라이언트가 실행됨
 - 브라우저가 URL에서 호스트이름(www.yunjingood.edu)을 추출하여 DNS 클라이언트에게 전달
 - DNS 클라이언트가 DNS서버에 호스트이름을 포함한 쿼리를 보냄
 - DNS 클라이언트가 호스트 이름에 대한 IP주소를 포함한 응답을 받음
 - 브라우저는 DNS로부터 받은 IP주소를 사용하여 해당 IP주소의 80번 포트에 있는 HTTP서버 프로세스와 TCP연결을 시작함

그외 기능:

**1 호스트 별칭 지정(Host Aliasing)**

 - 복잡한 호스트 이름을 가진 호스트에 하나 이상의 별칭 이름을 부여할 수 있음
 - 실제 네이버의 호스트 이름은 www.naver.com.nheos.com인데 별칭으로 www.naver.com사용하는 것임

   
2 메일 서버 별칭 지정(간단한 이메일 주소 사용)


**3 부하 분산(Load Distribution):** 복제된 웹 서버 간의 부하를 분산하는 데 사용(트래픽이 많은 사이트는 여러 서버에 복제되어 있으며, 각 서버는 다른 IP주소를 가짐)


   - IP주소 세트: 복제된 웹 서버는 하나의 호스트 별칭에 여러 IP주소가 연결되는데, DNS 데이터베이스는 이러한 세트를 포함함
   - DNS 쿼리 응답: 클라이언트가 IP주소 세트를 요청하면, DNS서버는 전체 IP주소의 순서를 회전시켜 응답으로 반환
   - 트래픽 분산: DNS 회전을 통해 트래픽이 복제된 서버 간에 분산됨

---
### 2.4.2 DNS 작동 개요
//1. 호스트 이름 요청: 호스트이름을 IP주소로 변환해야할 때, 애플리케이션은 DNS 클라이언트를 호출하여 변환할 호스트 이름을 지정. gethostbyname() 함수 호출을 통해 변환 요청을 수행
//2. DNS 쿼리 전송: DNS클라이언트는 쿼리 메시지를 UDP 데이터그램(포트 번호 53)으로 전송함
//3. DNS 응답 수신: 지연 시간에 따라 DNS클라이언트는 매핑 정보를 포함한 응답을 받고 애플리케이션에 전달됨

##### 중앙 집중형 설계의 문제점
1. 단일 장애 지점(Single Point of Failure): 중앙 DNS 서버가 다운되면 인터넷 전체가 영향을 받음.
2. 트래픽 과부하(Traffic Volume): 모든 HTTP 요청에서 발생하는 수많은 DNS 쿼리를 단일 서버가 처리해야 하므로, 트래픽 과부하가 발생
3. 거리 문제(Distant Centralized Database): 중앙 서버가 특정 위치(예: 뉴욕)에 있다면, 호주와 같은 먼 지역에서 오는 쿼리는 지구 반대편으로 이동해야 함
  -> 이는 느리고 혼잡한 링크를 통해 전송될 수 있어 상당한 지연을 초래함
4. 유지 관리(Maintenance): 중앙 서버는 인터넷에 존재하는 모든 호스트의 기록을 유지해야하므로 새로운 호스트 추가 시 빈번히 업데이트해야함 

**분산형 계층적 데이터베이스**
DNS는 전 세계에 분산된 다수의 서버를 사용하며, 이는 계층적으로 조직되어있음. 

크게 세 가지 계층으로 나뉨: 
루트 DNS 서버 (Root DNS Servers)
최상위 도메인(TLD) DNS 서버 (Top-Level Domain DNS Servers)
권한 있는 DNS 서버 (Authoritative DNS Servers)



